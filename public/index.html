<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>MAGI</title>
</head>
<body style="background:#000;color:#0f0;font-family:monospace;padding:20px">
<h1>MAGI SYSTEM</h1>
<hr>
<p>
Mode: <select id="mode">
<option value="consensus">CONSENSUS</option>
<option value="integration">INTEGRATION</option>
<option value="synthesis">SYNTHESIS</option>
</select>
</p>
<p>
<input type="text" id="q" style="width:300px" placeholder="質問">
<button onclick="ask()">送信</button>
</p>
<hr>
<pre id="result" style="border:1px solid #0f0;padding:10px;min-height:100px">
結果がここに表示されます
</pre>
<script>
function ask(){
  var q = document.getElementById('q').value;
  var m = document.getElementById('mode').value;
  if(!q) return;
  
  document.getElementById('result').textContent = '分析中...';
  
  fetch('/api/consensus', {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify({prompt: q, meta: {mode: m}})
  })
  .then(function(r){ return r.json(); })
  .then(function(d){
    document.getElementById('result').textContent = d.final;
  })
  .catch(function(e){
    document.getElementById('result').textContent = 'エラー: ' + e.message;
  });
}
</script>
</body>
</html>
